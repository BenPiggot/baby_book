var MaleWeight = {
  labels: ["", "2 Months", "", "4 Months", "", "6 Months", "", "8 Months", "","10 Months","","1 Year","", "14 Months", "", "16 Months", "", "18 Months", "", "20 Months", "","22 Months","","2 Years","", "26 Months", "", "28 Months", "", "30 Months", "", "32 Months", "","34 Months","","3 Years"],
  datasets: [
  {
    label: "3rd Percentile",
    fillColor: "rgba(0,0,128, 0.7)",
    strokeColor: "rgba(220,220,220,1)",
    pointColor: "rgba(220,220,220,1)",
    pointStrokeColor: "#fff",
    pointHighlightFill: "#fff",
    pointHighlightStroke: "rgba(220,220,220,1)",
    data: [2.355451,2.799549,3.614688,4.342341,4.992898,5.575169,6.096775,6.56443,6.984123,7.361236,7.700624,8.006677,8.283365,8.534275,8.762649,8.971407,9.16318,9.340328,9.504964,9.658975,9.804039,9.941645,10.07311,10.19957,10.32206,10.44144,10.55847,10.6738,10.78798,10.90147,11.01466,11.12787,11.24135,11.3553,11.46988,11.58521,11.70137,11.75978]
      },
  {
    label: "50th Percentile",
    fillColor: "rgba(0,191,255,0.4)",
    strokeColor: "rgba(151,187,205,1)",
    pointColor: "rgba(151,187,205,1)",
    pointStrokeColor: "#fff",
    pointHighlightFill: "#fff",
    pointHighlightStroke: "rgba(151,187,205,1)",
    data: [3.530203,4.003106,4.879525,5.672889,6.391392,7.041836,7.630425,8.162951,8.644832,9.08112,9.4765,9.835308,10.16154,10.45885,10.73063,10.97992,11.20956,11.42207,11.61978,11.80478,11.97897,12.14404,12.30154,12.45283,12.59913,12.74154,12.88102,13.01842,13.1545,13.2899,13.42519,13.56088,13.69738,13.83505,13.97418,14.11503,14.2578,14.32994]
  },
  {
    label: "97th Percentile",
    fillColor: "rgba(0,255,255,0.2)",
    strokeColor: "rgba(151,187,205,1)",
    pointColor: "rgba(151,187,205,1)",
    pointStrokeColor: "#fff",
    pointHighlightFill: "#fff",
    pointHighlightStroke: "rgba(151,187,205,1)",
    data: [4.446488,5.032625,6.121929,7.10625,7.993878,8.793444,9.513307,10.16135,10.74492,11.27084,11.74538,12.17436,12.56308,12.91645,13.23893,13.53462,13.80724,14.06019,14.29655,14.51909,14.73034,14.93256,15.12777,15.31777,15.50418,15.68841,15.8717,16.05514,16.23967,16.42609,16.61508,16.8072,17.00291,17.2026,17.40654,17.61495,17.82797,17.93625]
  },
  {
    label: "User data",
    fillColor: "rgba(0,255,255,0.2)",
    strokeColor: "rgba(1,18,20,1)",
    pointColor: "rgba(15,18,20,1)",
    pointStrokeColor: "#fff",
    pointHighlightFill: "#fff",
    pointHighlightStroke: "rgba(151,187,205,1)",
    data: [null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null]
  }]
};


var MaleLength = {
  labels: ["", "2 Months", "", "4 Months", "", "6 Months", "", "8 Months", "","10 Months","","1 Year","", "14 Months", "", "16 Months", "", "18 Months", "", "20 Months", "","22 Months","","2 Years","", "26 Months", "", "28 Months", "", "30 Months", "", "32 Months", "","34 Months","","3 Years"],
  datasets: [
  {
    label: "3rd Percentile",
    fillColor: "rgba(0,0,128, 0.7)",
    strokeColor: "rgba(220,220,220,1)",
    pointColor: "rgba(220,220,220,1)",
    pointStrokeColor: "#fff",
    pointHighlightFill: "#fff",
    pointHighlightStroke: "rgba(220,220,220,1)",
    data: [44.9251,47.97812,52.19859,55.26322,57.73049,59.82569,61.66384,63.31224,64.81395,66.19833,67.48635,68.6936,69.832,70.91088,71.9377,72.91853,73.85839,74.76147,75.63132,76.47096,77.283,78.06971,78.83308,79.57485,80.29656,80.99959,81.74464,82.47365,83.18812,83.88931,84.57826,85.25589,85.92294,86.58009,87.22791,87.86696,88.49774]
      },
  {
    label: "50th Percentile",
    fillColor: "rgba(0,191,255,0.4)",
    strokeColor: "rgba(151,187,205,1)",
    pointColor: "rgba(151,187,205,1)",
    pointStrokeColor: "#fff",
    pointHighlightFill: "#fff",
    pointHighlightStroke: "rgba(151,187,205,1)",
    data: [49.98888,52.69598,56.62843,59.60895,62.077,64.21686,66.12531,67.86018,69.45908,70.94804,72.34586,73.66665,74.9213,76.11838,77.2648,78.36622,79.42734,80.45209,81.44384,82.40544,83.33938,84.24783,85.1327,85.99565,86.83818,87.66161,88.45247,89.22326,89.97549,90.71041,91.42908,92.13242,92.82127,93.49638,94.15847,94.80823,95.44637]
  },
  {
    label: "97th Percentile",
    fillColor: "rgba(0,255,255,0.2)",
    strokeColor: "rgba(151,187,205,1)",
    pointColor: "rgba(151,187,205,1)",
    pointStrokeColor: "#fff",
    pointHighlightFill: "#fff",
    pointHighlightStroke: "rgba(151,187,205,1)",
    data: [54.919,57.62984,61.62591,64.69241,67.2519,69.48354,71.48218,73.30488,74.98899,76.56047,78.03819,79.43637,80.76602,82.03585,83.25292,84.42302,85.55095,86.64078,87.69597,88.7195,89.71393,90.68153,91.62428,92.54392,93.44203,94.31998,95.24419,96.13962,97.00763,97.84957,98.66677,99.46052,100.2321,100.9829,101.7142,102.4274,103.1237]
              },
  {
    label: "User data",
    fillColor: "rgba(117,202,235,0.2)",
    strokeColor: "rgba(1,18,20,1)",
    pointColor: "rgba(15,18,20,1)",
    pointStrokeColor: "#fff",
    pointHighlightFill: "#fff",
    pointHighlightStroke: "rgba(151,187,205,1)",
    data: [null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null]
  }]
};

var FemaleLength = {
  labels: ["", "2 Months", "", "4 Months", "", "6 Months", "", "8 Months", "","10 Months","","1 Year","", "14 Months", "", "16 Months", "", "18 Months", "", "20 Months", "","22 Months","","2 Years","", "26 Months", "", "28 Months", "", "30 Months", "", "32 Months", "","34 Months","","3 Years"],
  datasets: [
  {
    label: "3rd Percentile",
    fillColor: "rgba(255,20,147,0.5)",
    strokeColor: "rgba(220,220,220,1)",
    pointColor: "rgba(215, 44, 182, 1)",
    pointStrokeColor: "#fff",
    pointHighlightFill: "#fff",
    pointHighlightStroke: "rgba(220,220,220,1)",
    data: [44.9251,47.97812,52.19859,55.26322,57.73049,59.82569,61.66384,63.31224,64.81395,66.19833,67.48635,68.6936,69.832,70.91088,71.9377,72.91853,73.85839,74.76147,75.63132,76.47096,77.283,78.06971,78.83308,79.57485,80.29656,80.99959,81.74464,82.47365,83.18812,83.88931,84.57826,85.25589,85.92294,86.58009,87.22791,87.86696,88.49774]
  },
  {
    label: "50th Percentile",
    fillColor: "rgba(255,105,180,0.4)",
    strokeColor: "rgba(151,187,205,1)",
    pointColor: "rgba(32, 55, 182,1)",
    pointStrokeColor: "#fff",
    pointHighlightFill: "#fff",
    pointHighlightStroke: "rgba(151,187,205,1)",
    data: [49.98888,52.69598,56.62843,59.60895,62.077,64.21686,66.12531,67.86018,69.45908,70.94804,72.34586,73.66665,74.9213,76.11838,77.2648,78.36622,79.42734,80.45209,81.44384,82.40544,83.33938,84.24783,85.1327,85.99565,86.83818,87.66161,88.45247,89.22326,89.97549,90.71041,91.42908,92.13242,92.82127,93.49638,94.15847,94.80823,95.44637]
  },
  {
    label: "97th Percentile",
    fillColor: "rgba(255,182,193,0.2)",
    strokeColor: "rgba(151,187,205,1)",
    pointColor: "rgba(151,187,205,1)",
    pointStrokeColor: "#fff",
    pointHighlightFill: "#fff",
    pointHighlightStroke: "rgba(151,187,205,1)",
    data: [54.919,57.62984,61.62591,64.69241,67.2519,69.48354,71.48218,73.30488,74.98899,76.56047,78.03819,79.43637,80.76602,82.03585,83.25292,84.42302,85.55095,86.64078,87.69597,88.7195,89.71393,90.68153,91.62428,92.54392,93.44203,94.31998,95.24419,96.13962,97.00763,97.84957,98.66677,99.46052,100.2321,100.9829,101.7142,102.4274,103.1237]
  },
  {
    label: "User data",
    fillColor: "rgba(0,0,0,0.6)",
    strokeColor: "rgba(1,18,20,1)",
    pointColor: "rgba(15,18,20,1)",
    pointStrokeColor: "#fff",
    pointHighlightFill: "#fff",
    pointHighlightStroke: "rgba(151,187,205,1)",
    data: [null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null]
  }]
};
var FemaleWeight = {
  labels: ["", "2 Months", "", "4 Months", "", "6 Months", "", "8 Months", "","10 Months","","1 Year","", "14 Months", "", "16 Months", "", "18 Months", "", "20 Months", "","22 Months","","2 Years","", "26 Months", "", "28 Months", "", "30 Months", "", "32 Months", "","34 Months","","3 Years"],
  datasets: [
  {
    label: "3rd Percentile",
    fillColor: "rgba(255,20,147,0.5)",
    strokeColor: "rgba(220,220,220,1)",
    pointColor: "rgba(220,220,220,1)",
    pointStrokeColor: "#fff",
    pointHighlightFill: "#fff",
    pointHighlightStroke: "rgba(220,220,220,1)",
    data: [2.414112,2.756917,3.402293,3.997806,4.547383,5.054539,5.5225,5.954272,6.352668,6.720328,7.059732,7.373212,7.662959,7.93103,8.179356,8.409744,8.623887,8.82337,9.009668,9.18416,9.348127,9.50276,9.649162,9.788355,9.921281,10.04881,10.17173,10.29079,10.40664,10.5199,10.63112,10.74078,10.84935,10.95722,11.06475,11.17225,11.28,11.33404]
  },
  {
    label: "50th Percentile",
    fillColor: "rgba(255,105,180,0.4)",
    strokeColor: "rgba(151,187,205,1)",
    pointColor: "rgba(151,187,205,1)",
    pointStrokeColor: "#fff",
    pointHighlightFill: "#fff",
    pointHighlightStroke: "rgba(151,187,205,1)",
    data: [3.399186,3.797528,4.544777,5.230584,5.859961,6.437588,6.96785,7.454854,7.902436,8.314178,8.693418,9.043262,9.366594,9.666089,9.944226,10.20329,10.44541,10.67251,10.88639,11.08868,11.2809,11.4644,11.64043,11.81014,11.97454,12.13456,12.29102,12.44469,12.59622,12.74621,12.89517,13.04357,13.19181,13.34023,13.48913,13.63877,13.78937,13.86507]
  },
  {
    label: "97th Percentile",
    fillColor: "rgba(255,182,193,0.2)",
    strokeColor: "rgba(151,187,205,1)",
    pointColor: "rgba(151,187,205,1)",
    pointStrokeColor: "#fff",
    pointHighlightFill: "#fff",
    pointHighlightStroke: "rgba(151,187,205,1)",
    data: [4.254922,4.743582,5.657379,6.492574,7.256166,7.95473,8.594413,9.180938,9.719621,10.21539,10.6728,11.09607,11.48908,11.85539,12.19829,12.52078,12.82561,13.11527,13.39204,13.65799,13.91497,14.16467,14.40858,14.64807,14.88432,15.11839,15.35122,15.58363,15.81632,16.0499,16.28491,16.52176,16.76085,17.00245,17.24681,17.49412,17.7445,17.87089]
  },
  {
    label: "User data",
    fillColor: "rgba(117,202,235,0.2)",
    strokeColor: "rgba(1,18,20,1)",
    pointColor: "rgba(15,18,20,1)",
    pointStrokeColor: "#fff",
    pointHighlightFill: "#fff",
    pointHighlightStroke: "rgba(151,187,205,1)",
    data: [null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null]
  }]
};


$(function(){

  //stop here if there is no .stat_information item
  if($('.stat_information').length < 1) return;


  // console.log(MaleWeight.datasets[3].data[3])
  var stat = $('.stat_information').data('temp');
  // console.log(stat)
  var babyInfo = $('.baby_information').data('temp');
  // console.log(babyInfo)
  // var weightMonth = moment(weightDate).month()
  // console.log(weightDate)
  // console.log(weightMonth)




  var maleWeight = function(){
    var ctx = document.getElementById("canvas").getContext("2d");
    window.myLine = new Chart(ctx).Line(MaleWeight, {
      responsive: true
    });

    }

  var maleHeight = function(){
    var ctx = document.getElementById("canvas").getContext("2d");
    window.myLine = new Chart(ctx).Line(MaleLength, {
      responsive: true
    });

  };

  var femaleHeight = function(){
    var ctx = document.getElementById("canvas").getContext("2d");
    window.myLine = new Chart(ctx).Line(FemaleLength, {
      responsive: true
    });
  };

  var femaleWeight = function(){
    var ctx = document.getElementById("canvas").getContext("2d");
    window.myLine = new Chart(ctx).Line(FemaleWeight, {
      responsive: true
    });
  };



  $('#stat-charts').on('change', function() {

    $("#canvas-container").html("<canvas id='canvas'>")

    var selection = $(this).val()

      if (selection === "weight") {
        $("#chart-header").text("Your baby and national weight averages")
        if (gon.gender === "boy") {
          maleWeight()
        } else {
          femaleWeight()
        }
      }
      else if (selection === "height") {
        console.log(selection)
        $("#chart-header").text("Your baby and national height averages")
          if (gon.gender === "boy") {
            console.log("male")
            maleHeight()
          } else {
          femaleHeight()
        }
      }
  })

  // canvas 1 (male weight)
  for (var i = 0; i < stat.length; i++){
    var monthsOld = parseInt(moment(stat[i].date).diff(moment(babyInfo.birthday),'months',true));
    // console.log(monthsOld)
    if(monthsOld < 0 || monthsOld > 36) continue;
    MaleWeight.datasets[3].data[monthsOld-1] = stat[i].weight;
  }

  // canvas 2 (male length)
  for (var j = 0; j < stat.length; j++){
    var monthsOld2 = parseInt(moment(stat[j].date).diff(moment(babyInfo.birthday),'months',true));
    if(monthsOld2 < 0 || monthsOld2 > 36) continue;
    MaleLength.datasets[3].data[monthsOld2-1] = stat[j].height;
  }

  // canvas 3 (female length)
  for (var k = 0; k < stat.length; k++){
    var monthsOld3 = parseInt(moment(stat[k].date).diff(moment(babyInfo.birthday),'months',true));
    if(monthsOld3 < 0 || monthsOld3 > 36) continue;
    FemaleLength.datasets[3].data[monthsOld3-1] = stat[k].height;
  }
  // canvas 4 (female weight)
  for (var l = 0; l < stat.length; l++){
    var monthsOld4 = parseInt(moment(stat[l].date).diff(moment(babyInfo.birthday),'months',true));
    if(monthsOld4 < 0 || monthsOld4 > 36) continue;
    FemaleWeight.datasets[3].data[monthsOld4-1] = stat[l].weight;
  }


});
